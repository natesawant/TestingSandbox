var adalyserModules=trackerCore;adalyserModules.AdalyserTracker=function(e,r){var t=window;mutState={outQueues:[],bufferFlushers:[],expireDateTime:null,hasLoaded:false,registeredOnLoadHandlers:[]};function n(){var e;adalyserModules.helpers.forEach(mutState.bufferFlushers,function(e){e()});if(mutState.expireDateTime){do{e=new Date;if(adalyserModules.helpers.filter(mutState.outQueues,function(e){return e.length>0}).length===0){break}}while(e.getTime()<mutState.expireDateTime)}}t.AdalyserTracker={};adalyserModules.helpers.addEventListener(t,"beforeunload",n,false);return new adalyserModules.InQueueManager(e,mutState,r)};adalyserModules.InQueueManager=function(e,r,t){var n;function a(){if(adalyserModules.isBot(navigator.userAgent)){return}for(var e=0;e<arguments.length;e+=1){var r=arguments[e];var t=Array.prototype.shift.call(r);if(typeof t=="function"){t.apply(r);continue}if(t==="create"){o(r[0]);continue}n[t].apply(n[t],r)}}function o(e){e=e||{};if(!n){n=new adalyserModules.Tracker(t,r,e);n.setSilo("c5.adalyser.com")}else{console.log("Tracker already exists.")}}for(var i=0;i<e.length;i++){a(e[i])}return{push:a}};adalyserModules.OutQueueManager=function(e,r,t,n,a,o){var i,s=false,u,l;n=n&&window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;var c=n?"/tracking/track/v3/x":"/tracking/track/v3/p";a=adalyserModules.detectors.localStorageAccessible()&&t&&n&&a||1;i=["adal_out_queue",e,n?"post":"get"].join("_");if(t){try{l=JSON.parse(localStorage.getItem(i))}catch(v){}}if(!adalyserModules.libs.lodash.isArray(l)){l=[]}r.outQueues.push(l);if(n&&a>1){r.bufferFlushers.push(function(){if(!s){g()}})}if(n&&a>1){r.bufferFlushers.push(function(){if(!s){g()}})}function f(e){var r="?",t={co:true,cx:true},n=true;for(var a in e){if(e.hasOwnProperty(a)&&!t.hasOwnProperty(a)){if(!n){r+="&"}else{n=false}r+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])}}for(var o in t){if(e.hasOwnProperty(o)&&t.hasOwnProperty(o)){r+="&"+o+"="+encodeURIComponent(e[o])}}return r}function d(e){var r=adalyserModules.libs.lodash.mapValues(e,function(e){return e.toString()});return{evt:r,bytes:p(JSON.stringify(r))}}function p(e){var r=0;for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<=127){r+=1}else if(n<=2047){r+=2}else if(n>=55296&&n<=57343){r+=4;t++}else if(n<65535){r+=3}else{r+=4}}return r}function y(e,r){u=r+c;if(n){var p=d(e);if(p.bytes>=o){adalyserModules.helpers.warn("Event too large: size "+p.bytes+"exceeds maximum of "+o);var y=m(configCollectorUrl);y.send(encloseInPayloadDataEnvelope(h([p.evt])));return}else{l.push(p)}}else{l.push(f(e))}var v=false;if(t){v=adalyserModules.helpers.attemptWriteLocalStorage(i,JSON.stringify(l))}if(!s&&(!v||l.length>=a)){g()}}function g(){while(l.length&&typeof l[0]!=="string"&&typeof l[0]!=="object"){l.shift()}if(l.length<1){s=false;return}if(!adalyserModules.libs.lodash.isString(u)){throw"No silo configured, cannot track"}s=true;var e=l[0];if(n){var r=m(u);var a=setTimeout(function(){r.abort();s=false},5e3);function c(e){var r=0;var t=0;while(r<e.length){t+=e[r].bytes;if(t>=o){break}else{r+=1}}return r}var f=c(l);r.onreadystatechange=function(){if(r.readyState===4&&r.status>=200&&r.status<400){for(var e=0;e<f;e++){l.shift()}if(t){adalyserModules.helpers.attemptWriteLocalStorage(i,JSON.stringify(l))}clearTimeout(a);g()}else if(r.readyState===4&&r.status>=400){clearTimeout(a);s=false}};var d=adalyserModules.libs.lodash.map(l.slice(0,f),function(e){return e.evt});if(d.length>0){r.send(JSON.stringify(h(d)))}}else{var p=new Image(1,1);p.onload=function(){l.shift();if(t){adalyserModules.helpers.attemptWriteLocalStorage(i,JSON.stringify(l))}g()};p.onerror=function(){s=false};p.src=u+e.replace("?","?stm="+(new Date).getTime()+"&")}}function m(e){var r=new XMLHttpRequest;r.open("POST",e,true);r.withCredentials=true;r.setRequestHeader("Content-Type","application/json; charset=UTF-8");return r}function h(e){var r=(new Date).getTime().toString();for(var t=0;t<e.length;t++){e[t]["stm"]=r}return e}return{enqueueRequest:y,executeQueue:g}};adalyserModules.Payload=function(e){var r={};r.isJson=function(e){return typeof e!=="undefined"&&e!==null&&(e.constructor==={}.constructor||e.constructor===[].constructor)};r.isNonEmptyJson=function(e){if(!adalyserModules.Payload.isJson(e)){return false}for(var r in e){if(e.hasOwnProperty(r)){return true}}return false};r.payloadBuilder=function(e){var r={};var t=function(e,t){if(t!==undefined&&t!==null&&t!==""){r[e]=t}};var n=function(e){for(var r in e){if(e.hasOwnProperty(r)){t(r,e[r])}}};var a=function(e,r){if(adalyserModules.Payload.isNonEmptyJson(r)){var n=JSON.stringify(r);t(e,n)}};return{add:t,addDict:n,addJson:a,build:function(){return r}}};return r}();function trackerCore(e){var r={};function t(e,t){r[e]=t}function n(r,t,n,a){r.et=n||(new Date).getTime();if(t){r.addJson("co",t)}if(typeof e==="function"){e(r,a)}return r}function a(e,r,t,a){var o=adalyserModules.Payload.payloadBuilder();o.add("e",e);o.eventData=r;return n(o,t,a)}return{addPayloadPair:t,addPayloadDict:function(e){for(var t in e){if(e.hasOwnProperty(t)){r[t]=e[t]}}},resetPayloadPairs:function(e){r=payload.isJson(e)?e:{}},setScreenResolution:function(e,r){t("res",e+"x"+r)},setViewport:function(e,r){t("vp",e+"x"+r)},setColorDepth:function(e){t("cd",e)},setTimezone:function(e){t("tz",e)},setLang:function(e){t("lang",e)},setIpAddress:function(e){t("ip",e)},trackPageView:function(e,r,t,a,o){var i=adalyserModules.Payload.payloadBuilder();i.add("e","pv");i.add("url",e);i.add("page",r);i.add("refr",t);return n(i,a,o)},trackSession:function(e,r,t,a,o,i){var s=adalyserModules.Payload.payloadBuilder();s.add("e",e);s.eventData=r;s.add("url",t);s.add("refr",a);return n(s,o,i,"ses")},trackEvent:a}}adalyserModules.helpers=function(){var e={};e.determineDeviceType=function(e){if(e.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|Kindle|KFOT|KFTT/i)){return"mobile"}return"desktop"};e.attemptGetLocalStorage=function(e){try{return localStorage.getItem(e)}catch(r){}};e.attemptWriteLocalStorage=function(e,r){try{localStorage.setItem(e,r);return true}catch(t){return false}};e.findRootDomain=function(){var r="__adal";var t=""+(new Date).getTime();var n=window.location.hostname.split(".");var a=n.length-1;while(a>=0){var o=n.slice(a,n.length).join(".");adalyserModules.libs.cookie(r,t,0,"/",o);if(adalyserModules.libs.cookie(r)===t){e.deleteCookie(r,o);return o}a-=1}return window.location.hostname};e.strEndsWith=function(e,r){if(typeof String.prototype.endsWith=="function"){return String.prototype.endsWith.call(e,r)}return e.indexOf(r,e.length-r.length)!==-1};e.getCookiesWithPrefix=function(e){var r=document.cookie.split("; ");var t=[];for(var n=0;n<r.length;n++){if(r[n].substring(0,e.length)===e){t.push(r[n])}}return t};e.deleteCookie=function(e,r){adalyserModules.libs.cookie(e,"",-1,"/",r)};e.getReferrer=function(r){var t="";var n=e.fromQuerystring("referrer",window.location.href)||e.fromQuerystring("referer",window.location.href);if(n){return n}if(r){return r}try{t=window.top.document.referrer}catch(a){if(window.parent){try{t=window.parent.document.referrer}catch(o){t=""}}}if(t===""){t=document.referrer}return t};e.addEventListener=function(e,r,t,n){if(e.addEventListener){e.addEventListener(r,t,n);return true}if(e.attachEvent){return e.attachEvent("on"+r,t)}e["on"+r]=t};e.fromQuerystring=function(e,r){var t=new RegExp("^[^#]*[?&]"+e+"=([^&#]*)").exec(r);if(!t){return null}return decodeURIComponent(t[1].replace(/\+/g," "))};e.fixupDomain=function(e){var r=e.length;if(e.charAt(--r)==="."){e=e.slice(0,r)}if(e.slice(0,2)==="*."){e=e.slice(1)}return e};e.decorateQuerystring=function(e,r,t){var n=r+"="+t;var a=e.split("#");var o=a[0].split("?");var i=o.shift();var s=o.join("?");if(!s){s=n}else{var u=true;var l=s.split("&");for(var c=0;c<l.length;c++){if(l[c].substr(0,r.length+1)===r+"="){u=false;l[c]=n;s=l.join("&");break}}if(u){s=n+"&"+s}}a[0]=i+"?"+s;return a.join("#")};function r(e){return Object.prototype.toString.call(e)=="[object Array]"}function t(e){return Object.prototype.toString.call(e)=="[object String]"}function n(e){return e===undefined}function a(e,t,n){var a=-1,o=e?e.length:0,i=Array(typeof o=="number"?o:0);t=l(t,n);if(r(e)){while(++a<o){i[a]=t(e[a],a,e)}}else{c(e,function(e,r,n){i[++a]=t(e,r,n)})}return i}function o(e,r,t){var n={};r=l(r,t);c(e,function(e,t,a){n[t]=r(e,t,a)});return n}function i(e,t,n){var a=r(e)?u:s;t=l(t,n);return a(e,t)}e.filter=i;function s(e,r){var t=[];c(e,function(e,n,a){if(r(e,n,a)){t.push(e)}});return t}function u(e,r){var t=[],n=e.length,a=-1,o=-1;while(++a<n){var i=e[a];if(r(i,a,e)){t[++o]=i}}return t}function l(e,r){if(!e){return identity}if(typeof e!="function"){return function(r){return r[e]}}if(r!==undefined){return function(t,n,a){return e.call(r,t,n,a)}}return e}function c(e,r){for(var t in e){if(e.hasOwnProperty(t)){r.apply(e[t],[e[t],t,e])}}}e.forEach=c;var f={bin:{stringToBytes:function(e){for(var r=[],t=0;t<e.length;t++)r.push(e.charCodeAt(t)&255);return r},bytesToString:function(e){for(var r=[],t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return r.join("")}}};adalyserModules.libs||(adalyserModules.libs={});adalyserModules.libs.lodash={isArray:r,isUndefined:n,isString:t,map:a,mapValues:o};adalyserModules.libs.cookie=function(e,r,t,n,a,o){return 1<arguments.length?document.cookie=e+"="+escape(r)+(t?"; expires="+new Date(+new Date+1e3*t).toUTCString():"")+(n?"; path="+n:"")+(a?"; domain="+a:"")+(o?"; secure":""):unescape((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])};return e}();adalyserModules.detectors=function(e){var r=window,t={};t.hasLocalStorage=function(){try{return!!r.localStorage}catch(e){return true}};t.localStorageAccessible=function(){var e="modernizr";if(!t.hasLocalStorage()){return false}try{r.localStorage.setItem(e,e);r.localStorage.removeItem(e);return true}catch(n){return false}};t.detectTimezone=function(){return""};return t}();(function(){function e(e){var r=new RegExp("^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$");return r.test(e)}function r(r){var t,n;if(e(r)){try{t=document.body.children[0].children[0].children[0].children[0].children[0].children[0].innerHTML;n="You have reached the cached page for";return t.slice(0,n.length)===n}catch(a){return false}}}adalyserModules.isBot=function(e){return/sitecon|phantom|googlebot|mediapartners-google|adsbot-google|slurp|bingbot|adidxbot|msnbot|mj12|bingpreview|baiduspider|aihitbot|pingdom/i.test(navigator.userAgent.toLowerCase())};function t(e,r){var t=new RegExp("^(?:https?|ftp)(?::/*(?:[^?]+))([?][^#]+)"),n=t.exec(e);if(n){return adalyserModules.helpers.fromQuerystring(r,n[1])}return null}adalyserModules.fixupUrl=function(e,n,a){if(e==="translate.googleusercontent.com"){if(a===""){a=n}n=t(n,"u");e=adalyserModules.getHostName(n)}else if(e==="cc.bingj.com"||e==="webcache.googleusercontent.com"||r(e)){n=document.links[0].href;e=adalyserModules.getHostName(n)}return[e,n,a]};adalyserModules.getParameter=t;adalyserModules.fixupTitle=function(e){if(!adalyserModules.libs.lodash.isString(e)){e=e.text||"";var r=document.getElementsByTagName("title");if(r&&!adalyserModules.helpers.lodash.isUndefined(r[0])){e=r[0].text}}return e}})();adalyserModules.trafficSource=function(){var e={},r=document,t=window,n=r.domain;e.searchEngines={"^www\\.daum\\.net$":{name:"Daum",queryStrings:["q"]},"^www\\.eniro\\.se$":{name:"Eniro",queryStrings:["search_word"]},"^www\\.naver\\.com$":{name:"Naver",queryStrings:["query"]},"^www\\.google\\..*$":{name:"Google",queryStrings:["q"]},"^images\\.google\\.com$":{name:"Google",queryStrings:["q"]},"^cse\\.google\\..*$":{name:"Google",queryStrings:["q"]},"com.google.android.googlequicksearchbox":{name:"Google",queryStrings:["q"]},"^www\\.yahoo\\.com$":{name:"Yahoo",queryStrings:["p"]},"^www\\.msn\\.com$":{name:"MSN",queryStrings:["q"]},"^www\\.bing\\.com$":{name:"Bing",queryStrings:["q"]},"^www\\.aol\\.com$":{name:"AOL",queryStrings:["query","encquery","q"]},"^www\\.lycos\\.com$":{name:"Lycos",queryStrings:["query"]},"^www\\.ask\\.com$":{name:"Ask",queryStrings:["q"]},"^www\\.altavista\\.com$":{name:"Altavista",queryStrings:["q"]},"^search\\.netscape\\.com$":{name:"Netscape",queryStrings:["query"]},"^www\\.cnn\\.com$":{name:"CNN",queryStrings:["query"]},"^www\\.about\\.com$":{name:"About",queryStrings:["terms"]},"^www\\.mamma\\.com$":{name:"Mamma",queryStrings:["query"]},"^www\\.alltheweb\\.com$":{name:"Alltheweb",queryStrings:["q"]},"^www\\.voila\\.fr$":{name:"Voila",queryStrings:["rdata"]},"^search\\.virgilio\\.it$":{name:"Virgilio",queryStrings:["qs"]},"^www\\.bing\\.com$":{name:"Live",queryStrings:["q"]},"^www\\.baidu\\.com$":{name:"Baidu",queryStrings:["wd"]},"^www\\.alice\\.com$":{name:"Alice",queryStrings:["qs"]},"^www\\.yandex\\.com$":{name:"Yandex",queryStrings:["text"]},"^www\\.najdi\\.org\\.mk$":{name:"Najdi",queryStrings:["q"]},"^www\\.mamma\\.com$":{name:"Mama",queryStrings:["query"]},"^www\\.seznam\\.cz$":{name:"Seznam",queryStrings:["q"]},"^www\\.search\\.com$":{name:"Search",queryStrings:["q"]},"^www\\.wp\\.pl$":{name:"Wirtulana Polska",queryStrings:["szukaj"]},"^online\\.onetcenter\\.org$":{name:"O*NET",queryStrings:["qt"]},"^www\\.szukacz\\.pl$":{name:"Szukacz",queryStrings:["q"]},"^www\\.yam\\.com$":{name:"Yam",queryStrings:["k"]},"^www\\.pchome\\.com$":{name:"PCHome",queryStrings:["q"]},"^www\\.kvasir\\.no$":{name:"Kvasir",queryStrings:["q"]},"^sesam\\.no$":{name:"Sesam",queryStrings:["q"]},"^www\\.ozu\\.es$":{name:"Ozu",queryStrings:["q"]},"^www\\.terra\\.com$":{name:"Terra",queryStrings:["query"]},"^www\\.mynet\\.com$":{name:"Mynet",queryStrings:["q"]},"^www\\.ekolay\\.net$":{name:"Ekolay",queryStrings:["q"]},"^www\\.rambler\\.ru$":{name:"Rambler",queryStrings:["words"]}};e.socialNetworks={"^(.*\\.)?facebook\\.com$":"Facebook","^(.*\\.)?fb\\.me$":"Facebook","^(.*\\.)?twitter\\.com$":"Twitter","^(.*\\.)?linkedin\\.com$":"LinkedIn","^(.*\\.)?lnkd\\.in$":"LinkedIn","^(.*\\.)?pinterest\\.com$":"Pinterest","^(.*\\.)?blogger\\.com$":"Blogger","^(.*\\.)?blogspot\\.com$":"Blogger","^(.*\\.)?weebly\\.com$":"Weebly","^(.*\\.)?livejournal\\.com$":"LiveJournal","^(.*\\.)?plus\\.google\\.com$":"Google+","^(.*\\.)?youtube\\.com$":"YouTube"};e.referrerBlacklist=["^(.*\\.)?securesuite\\.co\\.uk.*$","^(.*\\.)?clicksafe\\.lloydstsb\\.com.*$","^(.*\\.)?arcot.com.*$","^(.*\\.)?barclaycard\\.co\\.uk.*$","^(.*\\.)?paypal\\.co.*$","^(.*\\.)?stripe.com.*$","^(.*\\.)?barclaycard\\.co\\.uk.*$","^(.*\\.)?mycardsecure\\.com.*$","^(.*\\.)?live\\.barclaycardsmartpay\\.com.*$","^(.*\\.)?verifiedbyvisa.barclays\\.co\\.uk.*$","^(.*\\.)?cap\\.attempts\\.securecode\\.com.*$","^(.*\\.)?customer.cc.at.paysafecard.com.*$","^(.*\\.)?acs4\\.3dsecure\\.no.*$","^(.*\\.)?securesuite\\.net.*$","^(.*\\.)?vcas2\\.visa\\.com.*$","^(.*\\.)?acs\\.sia\\.eu.*$","^(.*\\.)?hpp\\.realexpayments\\.com.*$","^(.*\\.)?pay\\.realexpayments\\.com.*$","^(.*\\.)?secure\\.worldpay\\.com.*$","^(.*\\.)?^adyen\\.com.*$","^(.*\\.)?^securesuite\\.co.*$","^(.*\\.)?^3dsecure\\.no.*$","^(.*\\.)?^acs2-3dsecure\\.cm-cic\\.com.*$","^(.*\\.)?^unitradeprod\\.alipay\\.com.*$","^(.*\\.)?^clearpay\\.co\\.*$","^(.*\\.)?^pay\\.klarna\\.com.*$","^(.*\\.)?^portal\\.afterpay\\.com.*$"];function a(r){if(typeof r==="undefined"){return false}for(var t in e.searchEngines){if(r.search(t)>-1){return e.searchEngines[t]}}return false}function o(r){if(typeof r==="undefined"){return false}for(var t in e.socialNetworks){if(r.search(t)>-1){return e.socialNetworks[t]}}return false}function i(e,r){if(e==n){return false}if(typeof e==="undefined"){return false}for(var t in r){if(e.search(r[t])>-1){return false}}return true}function s(e){var r=e.split("&"),t={};for(var n=0;n<r.length;n++){var a=r[n].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}e.getCampaignData=function(e,u,l){var c=n,f=s(t.location.search.substring(1)),d=r.referrer.split("?"),p=d[0],y=p.split("/")[0],g=p.split("/")[2],m;if(d.length==2){m=s(d[1])}var h={};var v,w;var b={setFromPrevious:false};if(f["gclid"]||f["gclsrc"]){h.so="google";h.me="cpc";h.gclid=f["gclid"]}else if(f["utm_source"]){if(l){var S=false;var k=f["utm_source"];for(var M=0;M<l.length;M++){if(k==l[M]){if(k=="facebook"&&"video"!=f["utm_medium"]){break}S=true;break}}b.isClickThrough=S}var _={so:"utm_source",me:"utm_medium",ca:"utm_campaign",co:"utm_content",ke:"utm_term"};adalyserModules.helpers.forEach(_,function(e,r,t){if(f[e]){h[r]=f[e]}else{h[r]="(not set)"}})}else if((v=a(g))!==false){h.so=v.name;h.me="organic";h.ca="(not set)";h.co="(not set)";h.ke="(not set)";if("https:"!=y&&typeof m!="undefined"){for(var q=0;q<v.queryStrings.length;q++){var P=m[v.queryStrings[q]];if(typeof P!="undefined"){h.ke=P}}}}else if((w=o(g))!==false){h.so=w;h.me="social";h.ca="(not set)";h.co="(not set)";h.ke="(not set)"}else if(i(g,u)){h.so=g;h.me="referral";h.ca="referral";h.co=p;h.ke="(not set)"}if(typeof h.so=="undefined"){if(e){h=e;b["setFromPrevious"]=true}else{h.so="direct";h.me="none";h.ca="direct";h.co="(not set)";h.ke="(not set)"}}b["campaignParams"]=h;return b};e.getChannelGrouping=function(e,r,n,a){var o=e.so,i=e.me;if(!o||!i){return"Unknown"}if(i=="organic"){return"Organic"}if(i=="referral"){return"Referral"}if(i=="email"){return"Email"}if(o=="direct"&&/^(\(not set\)|none)$/.test(i)){return"Direct"}if(/^(cpc|ppc|paidsearch)$/.test(i)){if(r){var u=s(t.location.search.substring(1));for(var l in r){var c=r[l];if(u[l]){for(var f in c){if(u[l].search(c[f])>-1){return"Paid Search (Brand)"}}}}return"Paid Search (Generic)"}else if(n){var u=s(t.location.search.substring(1));if(u[n]){for(var f in a){if(u[n].search(a[f])>-1){return"Paid Search (Brand)"}}}return"Paid Search (Generic)"}return"Paid Search"}if(/^(cpv|cpa|cpp|content-text)$/.test(i)){return"Other Advertising"}if(/^(social|social-network|social-media|sm|social network|social media)$/.test(i)){return"Social"}if(/^(display|cpm|banner)$/.test(i)){return"Display"}return"Unknown"};return e}();adalyserModules.Tracker=function(e,r,t){var n=t.hasOwnProperty("clientId")?t.clientId:0,a={68856412500:{campaignCookieTimeout:1209600}};if(n&&a.hasOwnProperty(n)){var o=a[n];for(var i in o){if(o.hasOwnProperty(i)){t[i]=o[i]}}}var s=adalyserModules(function(e,r){Ee(e);if(r=="ses"){if(B){var t=_e();if(!t){qe(e.et)}ie(e,h)}B=false}else{ie(e,h)}}),u=document,l=window,c=navigator,f=adalyserModules.fixupUrl(u.domain,l.location.href,adalyserModules.helpers.getReferrer()),d=adalyserModules.helpers.fixupDomain(f[0]),p=f[1],y=f[2],g,m=u.title,h=t.hasOwnProperty("pageUnloadTimer")?t.pageUnloadTimer:500,v,w="_adal_",b=t.hasOwnProperty("cookieDomain")?t.cookieDomain:null,S="/",k,M=t.hasOwnProperty("visitorCookieTimeout")?t.campaignCookieTimeout:63072e3,_=t.hasOwnProperty("campaignCookieTimeout")?t.campaignCookieTimeout:15552e3,q=t.hasOwnProperty("viewThroughCookieTimeout")?t.viewThroughCookieTimeout:2592e3,P=t.hasOwnProperty("conversionCookieTimeout")?t.conversionCookieTimeout:2592e3,T=t.hasOwnProperty("useLandingPageCookie")?t.useLandingPageCookie===true:false,$=t.hasOwnProperty("landingPageCookieTimeout")?t.landingPageCookieTimeout:2592e3,O=t.hasOwnProperty("sessionCookieTimeout")?t.sessionCookieTimeout:1800,C=adalyserModules.trafficSource.referrerBlacklist.concat(t.hasOwnProperty("trafficSourceInternalReferrers")?t.trafficSourceInternalReferrers:[]),x=u.characterSet||u.charset,N=t.hasOwnProperty("forceSecureTracker")?t.forceSecureTracker===true:false,D=t.hasOwnProperty("useLocalStorage")?t.useLocalStorage:true,E=t.hasOwnProperty("vodUtmSources")?t.vodUtmSources:[],A=t.hasOwnProperty("useCookies")?t.useCookies:true,L=c.userLanguage||c.language,R,J=(new Date).getTime(),j,I,U=1,B=false,z=[],F=t.hasOwnProperty("useLinkerParams")?t.useLinkerParams:false,Q=t.hasOwnProperty("linkerExpirationThreshold")?t.linkerExpirationThreshold:12e4,H=t.hasOwnProperty("brandGenericProp")?t.brandGenericProp:false,G=t.hasOwnProperty("brandPatterns")?t.brandPatterns:[],V=t.hasOwnProperty("brandMap")?t.brandMap:false,W=t.hasOwnProperty("anonymiseIP")?t.anonymiseIP:false,Y=new adalyserModules.OutQueueManager(e,r,D,t.post,t.bufferSize,t.maxPostBytes||4e4),K=[];if(!t.hasOwnProperty("discoverRootDomain")||t.discoverRootDomain){b=adalyserModules.helpers.findRootDomain()}s.setTimezone(adalyserModules.detectors.detectTimezone());s.addPayloadPair("lang",L);s.addPayloadPair("cs",x);function X(e){var r=_e();var t=(new Date).getTime();if(this.href){this.href=adalyserModules.helpers.decorateQuerystring(this.href,"_adal_cw",r+"."+t);var n=ve();if(n){var a=Me({cg:n.cg});this.href=adalyserModules.helpers.decorateQuerystring(this.href,"_adal_ca",encodeURIComponent(a)+"."+t)}}}function Z(e){if(this.action){var r=_e();var t=(new Date).getTime();if("post"==this.method.toLowerCase()){this.action=adalyserModules.helpers.decorateQuerystring(this.action,"_adal_cw",r+"."+t);var n=ve();if(n){var a=Me({cg:n.cg});this.action=adalyserModules.helpers.decorateQuerystring(this.action,"_adal_ca",a+"."+t)}}else if("get"==this.method.toLowerCase()){var o,i;for(var s=0;s<this.childNodes.length;s++){if("_adal_cw"==this.childNodes[s].name){o=this.childNodes[s]}else if("_adal_ca"==this.childNodes[s].name){i=this.childNodes[s]}}if(!o){o=u.createElement("input");o.setAttribute("type","hidden");o.setAttribute("name","_adal_cw");this.appendChild(o)}o.setAttribute("value",r+"."+t);var n=ve();var a=Me({cg:n.cg});if(n){if(!i){i=u.createElement("input");i.setAttribute("type","hidden");i.setAttribute("name","_adal_ca");this.appendChild(i)}i.setAttribute("value",a+"."+t)}}}}function ee(e){return function(){X.call(e)}}function re(e){return function(){Z.call(e)}}function te(e,r){if(typeof e=="function"){return e}else if(adalyserModules.libs.lodash.isArray(e)){var t=new RegExp(/^https?:\/\/([^\/:]+)/);return function(n){var a=n[r],o=a.match(t),i;if(o){i=o[1]}if(!i||i==u.location.hostname){return false}for(var s=0;s<e.length;s++){if(e[s]instanceof RegExp){if(e[s].test(i))return true}else if(i.indexOf(e[s])>=0){return true}}return false}}}function ne(e){var r=te(e,"href");for(var t=0;t<document.links.length;t++){var n=document.links[t];if(!n.adalDecorationEnabled&&r(n)){adalyserModules.helpers.addEventListener(n,"click",ee(n));adalyserModules.helpers.addEventListener(n,"mousedown",ee(n));n.adalDecorationEnabled=true}}}function ae(e){var r=te(e,"action");for(var t=0;t<document.forms.length;t++){var n=document.forms[t];if(!n.adalDecorationEnabled&&r(n)){adalyserModules.helpers.addEventListener(n,"submit",re(n));n.adalDecorationEnabled=true}}}function oe(e){var r=adalyserModules.getParameter(e,"_adal_cw");if(r){var t=r.split(".");var n=t.pop();if((new Date).getTime()-parseInt(n)<Q){me();qe(t.join("."))}}var a=adalyserModules.getParameter(e,"_adal_ca");if(a){var o=a.split(".");var i=o.pop();if((new Date).getTime()-parseInt(i)<Q){me();var s=be(o.join("."));if("Direct"===s["cg"]){s.so="direct";s.me="none"}Se(s)}}}function ie(e,t){var n=new Date;Y.enqueueRequest(e.build(),g);r.expireDateTime=n.getTime()+t}function se(e){var r;r=new RegExp("#.*");return e.replace(r,"")}function ue(){f=adalyserModules.fixupUrl(u.domain,l.location.href,adalyserModules.helpers.getReferrer());if(f[1]!==p){y=adalyserModules.helpers.getReferrer(p)}d=adalyserModules.helpers.fixupDomain(f[0]);p=f[1]}function le(e){var r,t,n=["","webkit","ms","moz"],a;if(!k){for(t=0;t<n.length;t++){a=n[t];if(u[ge(a,"hidden")]){if(u[ge(a,"visibilityState")]==="prerender"){r=true}break}}}if(r){adalyserModules.helpers.addEventListener(u,a+"visibilitychange",function o(){u.removeEventListener(a+"visibilitychange",o,false);e()});return}e()}function ce(e){return K.concat(e||[])}function fe(e,r){return(e||[]).concat(r?r():[])}function de(e,r,t){ue();m=u.title;lastConfigTitle=e;var n=adalyserModules.fixupTitle(lastConfigTitle||m);s.trackPageView(se(p),n,se(y),ce(fe(r,t)))}function pe(e,r,t,n){ue();s.trackSession(e,r,se(p),se(y),ce(fe(t,n)))}function ye(){if(!geolocationContextAdded&&c.geolocation&&c.geolocation.getCurrentPosition){geolocationContextAdded=true;navigator.geolocation.getCurrentPosition(function(e){var r=e.coords;var t={latitude:r.latitude,longitude:r.longitude,latitudeLongitudeAccuracy:r.accuracy,altitude:r.altitude,altitudeAccuracy:r.altitudeAccuracy,bearing:r.heading,speed:r.speed,timestamp:e.timestamp};K.push(t)})}}function ge(e,r){if(e!==""){return e+r.charAt(0).toUpperCase()+r.slice(1)}return r}function me(){if(z.length>0){adalyserModules.libs.cookie("__adal_ses",z.join("_"),O,S,b)}else{adalyserModules.libs.cookie("__adal_ses","*",O,S,b)}}function he(e,r,t,n,a,o){adalyserModules.libs.cookie("__adal_id",e+"."+r+"."+t+"."+n+"."+a+"."+o,M,S,b)}function ve(){var e=adalyserModules.libs.cookie("__adal_ca");if(!e){return null}return be(e)}function we(){var e=adalyserModules.libs.cookie("__adal_vt");if(!e){return null}return be(e)}function be(e){var r={},t=e.split("&");for(var n=0;n<t.length;n++){var a=t[n].split("=");if(a.length>1){r[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}}if(!adalyserModules.Payload.isNonEmptyJson(r)){return null}return r}function Se(e){adalyserModules.libs.cookie("__adal_ca",Me(e),_,S,b)}function ke(e){adalyserModules.libs.cookie("__adal_vt",Me(e),q,S,b)}function Me(e){var r="",t=true;for(var n in e){if(e.hasOwnProperty(n)){if(!t){r+="&"}else{t=false}r+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])}}return r}function _e(){return adalyserModules.libs.cookie("__adal_cw")}function qe(e){adalyserModules.libs.cookie("__adal_cw",e,P,S,b)}function Pe(){return adalyserModules.libs.cookie("__adal_lp")}function Te(e){adalyserModules.libs.cookie("__adal_lp",e,$,S,b)}function $e(e){adalyserModules.libs.cookie("__adal_sd",e,P,S,b)}function Oe(){return adalyserModules.libs.cookie("__adal_sd")}function Ce(){return uuid.v4()}function xe(){var e=A&&Ne();var r=De();if(r[1]){j=r[1]}else{j=Ce();r[1]=j}I=r[6];if(e){z=e[0]}else{r[3]++;B=true;I=uuid.v4();r[6]=I;r[5]=r[4]}if(A){me();if(T){var t=Pe();if(!t){Te(p)}}r[4]=Math.round((new Date).getTime()/1e3);r.shift();he.apply(null,r)}}function Ne(){var e=adalyserModules.libs.cookie("__adal_ses"),r=[];if(!e){return false}if(e=="*"){r[0]=[]}else{r=e.split(".");if(r[0]){r[0]=r[0].split("_")}}return r}function De(){if(!A){return[]}var e=new Date,r=Math.round(e.getTime()/1e3),t=adalyserModules.libs.cookie("__adal_id"),n;if(t){n=t.split(".");n.unshift("0")}else{n=["1",j,r,0,r,""]}if(!n[6]){n[6]=uuid.v4()}return n}function Ee(e){var r=Math.round((new Date).getTime()/1e3),t="__adal_id",a=Ne(),o=De(),i=o[0],s=o[1],u=o[2],l=o[3],f=o[4],g=o[5],m=o[6];var h=ve();var v={};var w=we();var b=adalyserModules.trafficSource.getCampaignData(h,C,E);var S=b.campaignParams;var k=false;if(!b.setFromPrevious||typeof S["cg"]==="undefined"){S["cg"]=adalyserModules.trafficSource.getChannelGrouping(S,V,H,G)}if(S.so!=="direct"){if(h){adalyserModules.helpers.forEach(S,function(e,r,t){if(e!==h[r]){k=true}});adalyserModules.helpers.forEach(h,function(e,r,t){if(e!==S[r]){k=true}})}else{k=true}if(!b.setFromPrevious){Se(S)}}else{if(!h){Se(S)}}var M=e.eventData;if(adalyserModules.libs.lodash.isUndefined(M)){M={}}M["et"]=e.et;if(l>1){M["nr"]="Returning"}else{M["nr"]="New"}M["cg"]=S["cg"];M["dt"]=adalyserModules.helpers.determineDeviceType(c.userAgent);adalyserModules.helpers.forEach(S,function(e,r,t){M[r]=e});if(b.isClickThrough){v=S;v["ctt"]=e.et;ke(v)}else{v=w}if(v){adalyserModules.helpers.forEach(v,function(e,r,t){M["vt_"+r]=e})}if(i==="0"){I=m;if(!a&&A||k){l++;g=f;I=uuid.v4();B=true}U=l}else{if((new Date).getTime()-J>O*1e3){I=uuid.v4();U++;B=true}}if(W){M["aip"]=1}var _=Oe();if(_!=""){M["sd"]=_}M["vid"]=U;M["sid"]=I;M["duid"]=s;ue();var q=_e();if(q){M["cw"]=parseInt(q)}else{M["cw"]=e.et}if(T){var P=Pe();if(P){M["lp"]=P}}e.add("cid",n);e.addJson("p",M);e.add("userAgent",c.userAgent);e.add("domain",d);e.add("url",se(p));e.add("refr",se(y));if(A){he(s,u,U,r,g,I);me()}J=(new Date).getTime()}function Ae(e){if(N){return"https"+"://"+e}return("https:"===u.location.protocol?"https":"http")+"://"+e}if(t.crossDomainLinker){ne(t.crossDomainLinker);if(t.decorateForms){ae(t.crossDomainLinker)}}if(F){oe(f[1])}xe();return{setCountPreRendered:function(e){k=e},setSilo:function(e){g=Ae(e)},trackPageView:function(e,r,t){le(function(){de(e,r,t)})},trackEvent:function(e,r,t){if(t){if(z.indexOf(e)>-1){return}z.push(e)}s.trackEvent(e,r)},trackSession:function(e,r,t,n){pe(e,r,t,n)}}};(function(){var JSON;JSON||(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var r=meta[e];return"string"==typeof r?r:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,r){var t,n,a,o,i,s=gap,u=r[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),"function"==typeof rep&&(u=rep.call(r,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,i=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,t=0;t<o;t+=1)i[t]=str(t,u)||"null";return a=0===i.length?"[]":gap?"[\n"+gap+i.join(",\n"+gap)+"\n"+s+"]":"["+i.join(",")+"]",gap=s,a}if(rep&&"object"==typeof rep)for(o=rep.length,t=0;t<o;t+=1)"string"==typeof rep[t]&&(n=rep[t],a=str(n,u),a&&i.push(quote(n)+(gap?": ":":")+a));else for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(a=str(n,u),a&&i.push(quote(n)+(gap?": ":":")+a));return a=0===i.length?"{}":gap?"{\n"+gap+i.join(",\n"+gap)+"\n"+s+"}":"{"+i.join(",")+"}",gap=s,a}}var global=Function("return this")(),JSON=global.JSON;JSON||(JSON={}),"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,r,t){var n;if(gap="",indent="","number"==typeof t)for(n=0;n<t;n+=1)indent+=" ";else"string"==typeof t&&(indent=t);if(rep=r,r&&"function"!=typeof r&&("object"!=typeof r||"number"!=typeof r.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,r){var t,n,a=e[r];if(a&&"object"==typeof a)for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(n=walk(a,t),void 0!==n?a[t]=n:delete a[t]);return reviver.call(e,r,a)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}),global.JSON=JSON}()})();var rng,crypto=window.crypto||window.msCrypto;if(crypto&&crypto.getRandomValues){var _rnds8=new Uint8Array(16);rng=function(){return crypto.getRandomValues(_rnds8),_rnds8}}if(!rng){var _rnds=new Array(16);rng=function(){for(var e,r=0;r<16;r++)0===(3&r)&&(e=4294967296*Math.random()),_rnds[r]=e>>>((3&r)<<3)&255;return _rnds}}function parse(e,r,t){var n=r&&t||0,a=0;for(r=r||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){a<16&&(r[n+a++]=_hexToByte[e])});a<16;)r[n+a++]=0;return r}function unparse(e,r){var t=r||0,n=_byteToHex
;return n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]}function v1(e,r,t){var n=r&&t||0,a=r||[];e=e||{};var o=void 0!==e.clockseq?e.clockseq:_clockseq,i=void 0!==e.msecs?e.msecs:(new Date).getTime(),s=void 0!==e.nsecs?e.nsecs:_lastNSecs+1,u=i-_lastMSecs+(s-_lastNSecs)/1e4;if(u<0&&void 0===e.clockseq&&(o=o+1&16383),(u<0||i>_lastMSecs)&&void 0===e.nsecs&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=i,_lastNSecs=s,_clockseq=o,i+=122192928e5;var l=(1e4*(268435455&i)+s)%4294967296;a[n++]=l>>>24&255,a[n++]=l>>>16&255,a[n++]=l>>>8&255,a[n++]=255&l;var c=i/4294967296*1e4&268435455;a[n++]=c>>>8&255,a[n++]=255&c,a[n++]=c>>>24&15|16,a[n++]=c>>>16&255,a[n++]=o>>>8|128,a[n++]=255&o;for(var f=e.node||_nodeId,d=0;d<6;d++)a[n+d]=f[d];return r?r:unparse(a)}function v4(e,r,t){var n=r&&t||0;"string"==typeof e&&(r="binary"==e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||rng)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,r)for(var o=0;o<16;o++)r[n+o]=a[o];return r||unparse(a)}for(var _byteToHex=[],_hexToByte={},i=0;i<256;i++)_byteToHex[i]=(i+256).toString(16).substr(1),_hexToByte[_byteToHex[i]]=i;var _seedBytes=rng(),_nodeId=[1|_seedBytes[0],_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]],_clockseq=16383&(_seedBytes[6]<<8|_seedBytes[7]),_lastMSecs=0,_lastNSecs=0,uuid=v4;uuid.v1=v1,uuid.v4=v4,uuid.parse=parse,uuid.unparse=unparse;var queueName=window.GlobalAdalyserNamespace.shift();var queue=window[queueName];queue.q=new adalyserModules.AdalyserTracker(queue.q,queueName);
